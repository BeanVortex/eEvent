{% extends 'menu.html' %}
{% load static tailwind_tags %}


{% block head %}
  <title>Events List</title>
  <link rel="icon" href="{% static 'logo.svg' %}">
{% endblock %}


{% block main %}

<div class="bg-gray-50 dark:bg-gray-900 text-white p-4">
    <div class="container mx-auto">
        {% if organizer_name %}
            <h1 class="text-2xl font-bold">Events List of {{organizer_name}}</h1>
        {% else %}
            <h1 class="text-2xl font-bold">Events List</h1>
        {% endif %}
    </div>
</div>

<div class="container mx-auto mt-8">
    <!-- Check if there are events to display -->
    {% if events %}
        <ul>
            <!-- Loop through each event and display its details -->
            {% for event in events %}
            <a href="/events/{{event.id}}/">
                <li class="mb-8 p-6 bg-white shadow-md rounded-lg">
                    <h2 class="text-2xl font-bold mb-2">{{ event.title }}</h2>
                    <p class="text-gray-600">{{ event.description }}</p>
                    <p class="text-gray-700 mt-2">Location: {{ event.location }}</p>
                    <p class="text-gray-700">Price: ${{ event.price }}</p>
                    <p class="text-gray-700">Starts on: {{ event.starts_on|date:"F d, Y H:i A" }}</p>
                    <p class="text-gray-700">Capacity: {{ event.capacity }}</p>
                   
                    {% for group in request.user.groups.all %}
                        {% if group.name == "AUTH_ORGANIZER" and request.user.id == event.organizer_user.user_id %}
                            <form action="" method="POST" class="mt-3">
                                {% csrf_token %}
                                <div class="flex items-center">
                                
                                    <a href="{% url 'index'%}" class=" text-white bg-cyan-600 hover:bg-cyan-700 focus:ring-4
                                    focus:outline-none focus:ring-cyan-300 font-medium rounded-lg text-sm px-5
                                    py-2.5 text-center dark:bg-cyan-600 dark:hover:bg-cyan-700 dark:focus:ring-cyan-800 mr-2">Edit</a>

                                    <button type="submit" class="text-white bg-red-600 hover:bg-red-700 focus:ring-4
                                    focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 
                                    py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800 ml-2">Delete</button>
                                </div>
                            </form>
                        {% else %}
                            <a href="/events/organizer/{{event.organizer_user_id}}/"
                                class="text-blue-500 hover:underline focus:text-green-500">
                                Organizer
                            </a>
                        {% endif %}
                        
                    {% endfor %}
                </li>
            </a>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-gray-600">No events available.</p>
    {% endif %}
</div>

{% endblock %} 
